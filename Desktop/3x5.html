<!DOCTYPE HTML>
<html>
<head>
<title>ApolReady | 3x5</title>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<header>
  <nav class="main-nav">
    <ul>
      <li>
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="3x5.html">3x5</a></li>
          <li><a href="4x6.html">4x6</a></li>
          <li><a href="options.html">Additional Options</a></li>
        </ul>
      </li>
    </ul>
  </nav>
</header>
<section id="video" class="home">
  <h1>ApolReady | 3x5</h1>
  <h2>The Apologetics Card Formater</h2>
</section>
<section id="main-content">
  <div class="text-intro">
    <h2>Create</h2>
  </div>

  <!-- All of the Actual Input Logic -->
  <textarea name="TextArea" id="text3x5"></textarea>
  <button onclick="submit3x5()">Submit</button>

<script>
function submit3x5()
{

  var userSubmission = document.getElementById("text3x5").value;
  var app = require('electron').remote;
  var dialog = app.dialog;

  dialog.showSaveDialog((fileName) => {
    if (fileName === undefined){
        console.log("You didn't save the file");
        alert("File not saved!!! No path/name defined. \nTo avoid this error on future attempts, make sure to select a folder for the file, and also add a file name.");
        return;
    }

    var PDFDocument, doc;
    var fs = require('fs');
    PDFDocument = require('pdfkit');
    doc = new PDFDocument({autoFirstPage: false});
    doc.pipe(fs.createWriteStream(fileName));

    doc.addPage({
     margins: {
     top: 264,
     bottom: 264,
     left: 288,
     right: 288
     }
    });

    doc.fontSize(11);
    doc.text(userSubmission);
    // Set a title and pass the X and Y coordinates
    //doc.fontSize(12).text('Apologetics Speech!', 50, 50);
    // Set the paragraph width and align direction
    //doc.text(userSubmission, {
        //align: 'left'
    //});

    //doc.rect(doc.x, 0, 410, doc.y).stroke();
    doc.end();

  });

}

</script>

</section>
<footer>
  <div class="copyright"><small>No Copyright. No Rights Reserved | by <a target="_blank" rel="nofollow" href="mailto:aaron.mann@outlook.com">Aaron Mann</a> | Please don't do anything illegal with this software. I'm broke.</small></div>
</footer>
</body>
</html>
